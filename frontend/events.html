
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events - Together Culture</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/tfav.png">
    <link rel="shortcut icon" href="/tfav.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?display=swap&family=Inter:wght@400;500;600;700;800&family=Noto+Sans:wght@400;500;600;700;800">
    <style>
        .calendar-day {
            min-height: 120px;
            border: 1px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .calendar-day:hover {
            background-color: #f8fafc;
            border-color: #3b82f6;
        }
        .calendar-day.has-events {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
        }
        .event-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 4px;
        }
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        .event-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .event-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-left-color: #3b82f6;
        }
        .event-card.upcoming {
            border-left-color: #10b981;
        }
        .event-card.past {
            border-left-color: #6b7280;
            opacity: 0.8;
        }
        .floating-action-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 40;
            box-shadow: 0 10px 25px -3px rgba(59, 130, 246, 0.5);
        }
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }
        .status-upcoming {
            background-color: #dcfce7;
            color: #166534;
        }
        .status-past {
            background-color: #f3f4f6;
            color: #6b7280;
        }
        .status-full {
            background-color: #fee2e2;
            color: #991b1b;
        }
        .status-available {
            background-color: #dbeafe;
            color: #1e40af;
        }
    </style>
</head>
<body class="bg-gray-50 font-inter">
    <!-- Header Navigation -->
    <nav class="bg-white shadow-sm border-b sticky top-0 z-30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-8">
                    <a href="/" class="flex items-center gap-3">
                        <svg class="h-8 w-8 text-blue-600" viewBox="0 0 48 48" fill="none">
                            <path d="M39.5563 34.1455V13.8546C39.5563 15.708 36.8773 17.3437 32.7927 18.3189C30.2914 18.916 27.263 19.2655 24 19.2655C20.737 19.2655 17.7086 18.916 15.2073 18.3189C11.1227 17.3437 8.44365 15.708 8.44365 13.8546V34.1455C8.44365 35.9988 11.1227 37.6346 15.2073 38.6098C17.7086 39.2069 20.737 39.5564 24 39.5564C27.263 39.5564 30.2914 39.2069 32.7927 38.6098C36.8773 37.6346 39.5563 35.9988 39.5563 34.1455Z" fill="currentColor"></path>
                        </svg>
                        <h1 class="text-xl font-bold text-gray-900">Together Culture</h1>
                    </a>
                    <div class="hidden md:flex items-center gap-6">
                        <a href="./admin_dashboard.html" class="text-gray-600 hover:text-gray-900 font-medium transition-colors">Dashboard</a>
                        <a href="./member_directory.html" class="text-gray-600 hover:text-gray-900 font-medium transition-colors">Members</a>
                        <a href="./events.html" class="text-blue-600 font-semibold border-b-2 border-blue-600 pb-4">Events</a>
                        <a href="./messages.html" class="text-gray-600 hover:text-gray-900 font-medium transition-colors">Messages</a>
                        <a href="./resources.html" class="text-gray-600 hover:text-gray-900 font-medium transition-colors">Resources</a>
                        <a href="./settings.html" class="text-gray-600 hover:text-gray-900 font-medium transition-colors">Settings</a>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <span id="user-name" class="text-sm text-gray-600 font-medium"></span>
                    <button id="logout-btn" class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors">
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Header Section -->
        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8">
            <div class="mb-6 lg:mb-0">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">Events Management</h1>
                <p class="text-lg text-gray-600">Discover, create, and manage community events</p>
            </div>
            <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
                <!-- View Toggle -->
                <div class="flex bg-gray-100 rounded-lg p-1">
                    <button id="list-view-btn" class="px-4 py-2 text-sm font-medium text-gray-900 bg-white rounded-md shadow-sm transition-all">
                        <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                        </svg>
                        List
                    </button>
                    <button id="calendar-view-btn" class="px-4 py-2 text-sm font-medium text-gray-500 transition-all">
                        <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        Calendar
                    </button>
                </div>
                <!-- Create Event Button (Admin only) -->
                <button id="create-event-btn" class="hidden bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    Create Event
                </button>
            </div>
        </div>

        <!-- Filters & Search -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Filters & Search</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Search Events</label>
                    <div class="relative">
                        <input type="text" id="search-input" placeholder="Search by title, location..." 
                               class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <svg class="absolute left-3 top-3.5 h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                    <select id="status-filter" class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="all">All Events</option>
                        <option value="upcoming">Upcoming</option>
                        <option value="past">Past Events</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Sort By</label>
                    <select id="sort-filter" class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="date">Date</option>
                        <option value="title">Title</option>
                        <option value="capacity">Capacity</option>
                        <option value="registered_count">Popularity</option>
                    </select>
                </div>
                <div class="flex items-end">
                    <button id="clear-filters-btn" class="w-full px-4 py-3 text-sm font-medium text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                        Clear All
                    </button>
                </div>
            </div>
        </div>

        <!-- Content Views -->
        <!-- List View -->
        <div id="list-view">
            <!-- Loading State -->
            <div id="events-loading" class="flex justify-center py-20">
                <div class="text-center">
                    <div class="loading-spinner mx-auto mb-4"></div>
                    <p class="text-gray-500">Loading events...</p>
                </div>
            </div>

            <!-- Events Container -->
            <div id="events-container" class="hidden space-y-6"></div>

            <!-- No Events State -->
            <div id="no-events" class="hidden text-center py-20">
                <svg class="mx-auto h-16 w-16 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">No events found</h3>
                <p class="text-gray-500 mb-6">Try adjusting your filters or search terms.</p>
                <button id="create-first-event-btn" class="hidden bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors">
                    Create Your First Event
                </button>
            </div>

            <!-- Pagination -->
            <div id="pagination" class="hidden mt-8 flex items-center justify-between border-t border-gray-200 pt-6">
                <div class="flex-1 flex justify-between sm:hidden">
                    <button id="prev-mobile" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                        Previous
                    </button>
                    <button id="next-mobile" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                        Next
                    </button>
                </div>
                <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                    <div>
                        <p class="text-sm text-gray-700">
                            Showing <span id="showing-from" class="font-medium">1</span> to <span id="showing-to" class="font-medium">10</span> of <span id="total-events" class="font-medium">0</span> events
                        </p>
                    </div>
                    <div>
                        <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px">
                            <button id="prev-desktop" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>
                            <div id="page-numbers" class="flex"></div>
                            <button id="next-desktop" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </nav>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar View -->
        <div id="calendar-view" class="hidden">
            <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                <div class="flex items-center justify-between p-6 border-b border-gray-200">
                    <h2 id="calendar-month" class="text-xl font-semibold text-gray-900"></h2>
                    <div class="flex items-center gap-3">
                        <button id="today-btn" class="px-4 py-2 text-sm font-medium text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors">
                            Today
                        </button>
                        <div class="flex items-center gap-1">
                            <button id="prev-month" class="p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>
                            <button id="next-month" class="p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-7 gap-0">
                    <div class="p-4 text-center text-sm font-semibold text-gray-700 border-b border-gray-200 bg-gray-50">Sun</div>
                    <div class="p-4 text-center text-sm font-semibold text-gray-700 border-b border-gray-200 bg-gray-50">Mon</div>
                    <div class="p-4 text-center text-sm font-semibold text-gray-700 border-b border-gray-200 bg-gray-50">Tue</div>
                    <div class="p-4 text-center text-sm font-semibold text-gray-700 border-b border-gray-200 bg-gray-50">Wed</div>
                    <div class="p-4 text-center text-sm font-semibold text-gray-700 border-b border-gray-200 bg-gray-50">Thu</div>
                    <div class="p-4 text-center text-sm font-semibold text-gray-700 border-b border-gray-200 bg-gray-50">Fri</div>
                    <div class="p-4 text-center text-sm font-semibold text-gray-700 border-b border-gray-200 bg-gray-50">Sat</div>
                </div>
                <div id="calendar-grid" class="grid grid-cols-7 gap-0"></div>
            </div>
        </div>
    </div>

    <!-- Floating Action Button (Mobile) -->
    <button id="floating-create-btn" class="hidden lg:hidden floating-action-btn bg-blue-600 text-white p-4 rounded-full hover:bg-blue-700 transition-all shadow-lg">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
        </svg>
    </button>

    <!-- Event Details Modal -->
    <div id="event-modal" class="hidden fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity modal-backdrop" onclick="closeEventModal()"></div>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full">
                <div class="bg-white px-6 pt-6 pb-4">
                    <div class="flex items-start justify-between mb-4">
                        <h3 id="modal-title" class="text-xl font-semibold text-gray-900"></h3>
                        <button onclick="closeEventModal()" class="text-gray-400 hover:text-gray-600 rounded-lg p-1 hover:bg-gray-100">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <div id="modal-content" class="space-y-4"></div>
                </div>
                <div class="bg-gray-50 px-6 py-4 flex flex-col sm:flex-row gap-3 sm:justify-end">
                    <div id="modal-actions" class="flex flex-col sm:flex-row gap-3"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Event Form Modal -->
    <div id="event-form-modal" class="hidden fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity modal-backdrop" onclick="closeEventFormModal()"></div>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full">
                <form id="event-form" class="space-y-0">
                    <div class="bg-white px-6 pt-6 pb-4">
                        <div class="flex items-center justify-between mb-6">
                            <h3 id="form-modal-title" class="text-xl font-semibold text-gray-900">Create New Event</h3>
                            <button type="button" onclick="closeEventFormModal()" class="text-gray-400 hover:text-gray-600 rounded-lg p-1 hover:bg-gray-100">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="lg:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Event Title *</label>
                                <input type="text" id="event-title" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="Enter event title">
                            </div>

                            <div class="lg:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Description *</label>
                                <textarea id="event-description" rows="4" required
                                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                          placeholder="Describe your event..."></textarea>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Date *</label>
                                <input type="date" id="event-date" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Time *</label>
                                <input type="time" id="event-time" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Location *</label>
                                <input type="text" id="event-location" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="Event location">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Capacity *</label>
                                <input type="number" id="event-capacity" min="1" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="Maximum attendees">
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-6 py-4 flex flex-col sm:flex-row gap-3 sm:justify-end">
                        <button type="button" onclick="closeEventFormModal()" 
                                class="px-6 py-3 border border-gray-300 text-gray-700 bg-white rounded-lg hover:bg-gray-50 font-medium transition-colors">
                            Cancel
                        </button>
                        <button type="submit" id="save-event-btn" 
                                class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors flex items-center justify-center">
                            <span class="save-text">Create Event</span>
                            <div class="hidden save-loading loading-spinner ml-2"></div>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/js/config.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/events.js"></script>
</body>
</html>
