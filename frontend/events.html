
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events - Together Culture CRM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-gray-100">
    <!-- Header Navigation -->
    <header class="w-full bg-white shadow-md z-50">
        <div class="main-container flex items-center justify-between h-16">
            <div class="flex items-center gap-6">
                <a href="/" class="flex items-center gap-2">
                    <svg class="h-8 w-8 brand-text-primary" viewBox="0 0 48 48" fill="none">
                        <path d="M39.5563 34.1455V13.8546C39.5563 15.708 36.8773 17.3437 32.7927 18.3189C30.2914 18.916 27.263 19.2655 24 19.2655C20.737 19.2655 17.7086 18.916 15.2073 18.3189C11.1227 17.3437 8.44365 15.708 8.44365 13.8546V34.1455C8.44365 35.9988 11.1227 37.6346 15.2073 38.6098C17.7086 39.2069 20.737 39.5564 24 39.5564C27.263 39.5564 30.2914 39.2069 32.7927 38.6098C36.8773 37.6346 39.5563 35.9988 39.5563 34.1455Z" fill="currentColor"></path>
                    </svg>
                    <h1 class="text-xl font-bold brand-text-dark">Together Culture</h1>
                </a>
                <div class="hidden md:flex items-center gap-4">
                    <a id="dashboard-link" href="./admin_dashboard.html" class="text-brand-primary font-semibold hover:text-brand-primary">Dashboard</a>
                    <a href="./member_directory.html" class="text-gray-600 hover:text-gray-900">Members</a>
                    <a id="events-link" href="./events.html" class="text-brand-primary font-semibold">Events</a>
                    <a href="./messages.html" class="text-gray-600 hover:text-gray-900">Messages</a>
                    <a href="./resources.html" class="text-gray-600 hover:text-gray-900">Resources</a>
                    <a href="./settings.html" class="text-gray-600 hover:text-gray-900">Settings</a>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <span id="user-name-header" class="text-sm text-gray-600"></span>
                <button id="logout-button-header" class="text-sm text-red-600 hover:text-red-800">Logout</button>
            </div>
        </div>
    </header>
    <div id="loader" class="flex justify-center items-center h-screen">
        <div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-brand-primary"></div>
    </div>
    <div id="root" class="hidden flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-white shadow-md flex flex-col">
            <div class="p-6 border-b">
                <h1 class="text-2xl font-bold brand-text-dark">Admin Panel</h1>
                <p id="user-name" class="text-sm text-gray-500 mt-1"></p>
            </div>
            <nav class="flex-grow px-4 py-6">
                <a href="./admin_dashboard.html" class="flex items-center p-3 my-1 text-gray-600 hover:bg-gray-200 rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 7v4a1 1 0 001 1h3m10 0h3a1 1 0 001-1V7a1 1 0 00-1-1h-3M7 7V3a1 1 0 011-1h8a1 1 0 011 1v4"/></svg>
                    Dashboard
                </a>
                <a href="./member_directory.html" class="flex items-center p-3 my-1 text-gray-600 hover:bg-gray-200 rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a4 4 0 00-3-3.87M9 20H4v-2a4 4 0 013-3.87m9-5a4 4 0 10-8 0 4 4 0 008 0zm-4-4V4m0 0a4 4 0 110 8 4 4 0 010-8z"/></svg>
                    Members
                </a>
                <a href="./events.html" class="flex items-center p-3 my-1 bg-brand-beige text-brand-primary rounded-lg font-semibold">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3a1 1 0 011-1h6a1 1 0 011 1v4m-9 4h10m-7 4h4"/></svg>
                    Events
                </a>
                <a href="./messages.html" class="flex items-center p-3 my-1 text-gray-600 hover:bg-gray-200 rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8h2a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V10a2 2 0 012-2h2m2-4h4m-4 4h4"/></svg>
                    Messages
                </a>
                <a href="./resources.html" class="flex items-center p-3 my-1 text-gray-600 hover:bg-gray-200 rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10M7 12h4m1 8h2a2 2 0 002-2V6a2 2 0 00-2-2H7a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                    Resources
                </a>
                <a href="./settings.html" class="flex items-center p-3 my-1 text-gray-600 hover:bg-gray-200 rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    Settings
                </a>
            </nav>
            <div class="p-4 border-t">
                <button id="logout-button" class="w-full text-left p-3 text-gray-600 hover:bg-gray-200 rounded-lg transition-colors">
                    <i class="fas fa-sign-out-alt mr-2"></i>Logout
                </button>
            </div>
        </aside>
        <!-- Main Content -->
        <main class="flex-1 p-8 overflow-y-auto">
            <!-- Notification area -->
            <div id="notification-container" class="fixed top-6 right-6 z-50"></div>

        <!-- Search and Filter Section -->
        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
            <div class="flex flex-col sm:flex-row gap-4">
                <div class="flex-1">
                    <label for="searchInput" class="block text-sm font-medium text-gray-700 mb-2">Search Events</label>
                    <input type="text" id="searchInput" placeholder="Search by title, description, or location..." 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                <div class="sm:w-48">
                    <label for="statusFilter" class="block text-sm font-medium text-gray-700 mb-2">Filter by Status</label>
                    <select id="statusFilter" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="all">All Events</option>
                        <option value="upcoming">Upcoming</option>
                        <option value="past">Past</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Events List -->
        <div id="eventsContainer" class="grid gap-6">
            <!-- Events will be dynamically loaded here -->
        </div>

        <!-- Pagination -->
        <div id="pagination" class="mt-8">
            <!-- Pagination will be dynamically loaded here -->
        </div>
    </main>

    <!-- Create Event Modal -->
    <div id="createEventModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <h3 class="text-xl font-semibold text-gray-900">Create New Event</h3>
                <button data-modal-close class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form id="createEventForm" class="p-6">
                <div class="space-y-4">
                    <div>
                        <label for="title" class="block text-sm font-medium text-gray-700 mb-1">Event Title *</label>
                        <input type="text" id="title" name="title" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="Enter event title">
                    </div>
                    <div>
                        <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Description *</label>
                        <textarea id="description" name="description" required rows="4"
                                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                                  placeholder="Enter event description"></textarea>
                    </div>
                    <div>
                        <label for="event_date" class="block text-sm font-medium text-gray-700 mb-1">Event Date & Time *</label>
                        <input type="datetime-local" id="event_date" name="event_date" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                    <div>
                        <label for="location" class="block text-sm font-medium text-gray-700 mb-1">Location *</label>
                        <input type="text" id="location" name="location" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="Enter event location">
                    </div>
                    <div>
                        <label for="capacity" class="block text-sm font-medium text-gray-700 mb-1">Capacity (Optional)</label>
                        <input type="number" id="capacity" name="capacity" min="1"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="Enter maximum attendees (leave empty for unlimited)">
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200">
                    <button type="button" data-modal-close class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50">
                        Cancel
                    </button>
                    <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md">
                        <i class="fas fa-save mr-2"></i>Create Event
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Event Modal -->
    <div id="editEventModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <h3 class="text-xl font-semibold text-gray-900">Edit Event</h3>
                <button data-modal-close class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form id="editEventForm" class="p-6">
                <input type="hidden" id="editEventId" name="eventId">
                <div class="space-y-4">
                    <div>
                        <label for="editTitle" class="block text-sm font-medium text-gray-700 mb-1">Event Title *</label>
                        <input type="text" id="editTitle" name="title" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="Enter event title">
                    </div>
                    <div>
                        <label for="editDescription" class="block text-sm font-medium text-gray-700 mb-1">Description *</label>
                        <textarea id="editDescription" name="description" required rows="4"
                                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                                  placeholder="Enter event description"></textarea>
                    </div>
                    <div>
                        <label for="editEventDate" class="block text-sm font-medium text-gray-700 mb-1">Event Date & Time *</label>
                        <input type="datetime-local" id="editEventDate" name="event_date" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                    <div>
                        <label for="editLocation" class="block text-sm font-medium text-gray-700 mb-1">Location *</label>
                        <input type="text" id="editLocation" name="location" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="Enter event location">
                    </div>
                    <div>
                        <label for="editCapacity" class="block text-sm font-medium text-gray-700 mb-1">Capacity (Optional)</label>
                        <input type="number" id="editCapacity" name="capacity" min="1"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="Enter maximum attendees (leave empty for unlimited)">
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200">
                    <button type="button" data-modal-close class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50">
                        Cancel
                    </button>
                    <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md">
                        <i class="fas fa-save mr-2"></i>Update Event
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- View Event Modal -->
    <div id="viewEventModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <h3 class="text-xl font-semibold text-gray-900">Event Details</h3>
                <button data-modal-close class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-6">
                <div class="space-y-4">
                    <div>
                        <h4 class="text-lg font-semibold text-gray-900" id="viewEventTitle"></h4>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                        <p class="text-gray-600" id="viewEventDescription"></p>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Date & Time</label>
                            <p class="text-gray-600" id="viewEventDate"></p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                            <p class="text-gray-600" id="viewEventLocation"></p>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Attendance</label>
                        <p class="text-gray-600" id="viewEventCapacity"></p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">RSVPs</label>
                        <div id="viewEventRsvps" class="max-h-48 overflow-y-auto border border-gray-200 rounded p-3">
                            <!-- RSVPs will be loaded here -->
                        </div>
                    </div>
                </div>
                <div class="flex justify-end mt-6 pt-6 border-t border-gray-200">
                    <button data-modal-close class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/events.js"></script>
    <script>
        // Navigation function
        function goToAdminDashboard() {
            window.location.href = '/admin_dashboard.html';
        }
    </script>
</body>
</html>
