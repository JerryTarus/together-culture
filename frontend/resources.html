
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resources - Together Culture</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/tfav.png">
    <link rel="shortcut icon" href="/tfav.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./css/style.css" />
    <style>
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .file-drop-zone {
            border: 2px dashed #e5e7eb;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }
        .file-drop-zone.dragover {
            border-color: var(--brand-primary);
            background: linear-gradient(135deg, #fef3e2 0%, #fed7aa 100%);
            transform: scale(1.02);
        }
        .resource-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        .resource-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            border-color: var(--brand-primary);
        }
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid var(--brand-primary);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .modal-backdrop {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
        }
        .progress-bar {
            width: 0%;
            transition: width 0.3s ease;
            background: linear-gradient(90deg, var(--brand-primary), #f59e0b);
        }
        .file-icon {
            width: 28px;
            height: 28px;
        }
        .filter-card {
            background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
            border: 1px solid #e5e7eb;
        }
        .stats-card {
            background: linear-gradient(135deg, var(--brand-primary) 0%, #f59e0b 100%);
        }
        .nav-gradient {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-bottom: 1px solid #e2e8f0;
        }
        .btn-primary {
            background: linear-gradient(135deg, var(--brand-primary) 0%, #f59e0b 100%);
            border: none;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(210, 105, 30, 0.3);
        }
        .search-input {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        .search-input:focus {
            background: white;
            border-color: var(--brand-primary);
            transform: scale(1.02);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 via-white to-gray-100 min-h-screen">
    <!-- Navigation -->
    <nav class="nav-gradient shadow-lg sticky top-0 z-40">
        <div class="main-container flex items-center justify-between h-16">
            <div class="flex items-center gap-6">
                <a href="/" class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center">
                        <svg class="h-6 w-6 text-white" viewBox="0 0 48 48" fill="none">
                            <path d="M39.5563 34.1455V13.8546C39.5563 15.708 36.8773 17.3437 32.7927 18.3189C30.2914 18.916 27.263 19.2655 24 19.2655C20.737 19.2655 17.7086 18.916 15.2073 18.3189C11.1227 17.3437 8.44365 15.708 8.44365 13.8546V34.1455C8.44365 35.9988 11.1227 37.6346 15.2073 38.6098C17.7086 39.2069 20.737 39.5564 24 39.5564C27.263 39.5564 30.2914 39.2069 32.7927 38.6098C36.8773 37.6346 39.5563 35.9988 39.5563 34.1455Z" fill="currentColor"></path>
                        </svg>
                    </div>
                    <h1 class="text-xl font-bold brand-text-dark">Together Culture</h1>
                </a>
                <div class="hidden md:flex items-center gap-6">
                    <a id="dashboard-link" href="/admin_dashboard.html" class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all">Dashboard</a>
                    <a href="/events.html" class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all">Events</a>
                    <a href="/messages.html" class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all">Messages</a>
                    <a href="/resources.html" class="bg-orange-100 text-orange-700 font-semibold px-3 py-2 rounded-lg">Resources</a>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <span id="user-name" class="text-sm text-gray-600 hidden sm:block px-3 py-1 bg-gray-100 rounded-full"></span>
                <button id="logout-btn" class="px-4 py-2 text-sm text-red-600 hover:text-white hover:bg-red-500 rounded-lg transition-all duration-300">
                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                    </svg>
                    Logout
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-container py-8">
        <!-- Header Section -->
        <div class="mb-8">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6">
                <div>
                    <h1 class="text-4xl font-bold text-gray-900 mb-2">Resource Center</h1>
                    <p class="text-lg text-gray-600">Manage and access your community documents, templates, and files</p>
                </div>
                <div class="flex items-center gap-4 mt-6 lg:mt-0">
                    <div class="stats-card text-white px-6 py-3 rounded-xl shadow-lg">
                        <div class="text-sm opacity-90">Total Resources</div>
                        <div id="total-stats" class="text-2xl font-bold">0</div>
                    </div>
                    <button id="upload-resource-btn" class="btn-primary text-white px-6 py-3 rounded-xl font-semibold shadow-lg">
                        <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                        Upload Resource
                    </button>
                </div>
            </div>
        </div>

        <!-- Filters Card -->
        <div class="filter-card rounded-2xl shadow-lg p-6 mb-8">
            <div class="flex items-center gap-3 mb-4">
                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"></path>
                </svg>
                <h3 class="text-lg font-semibold text-gray-900">Filter & Search</h3>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4">
                <div class="lg:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Search Resources</label>
                    <div class="relative">
                        <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <input type="text" id="search-input" placeholder="Search by title, description, or tags..." 
                               class="search-input w-full pl-10 pr-4 py-3 rounded-xl focus:outline-none focus:ring-0">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                    <select id="category-filter" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        <option value="all">All Categories</option>
                        <option value="documentation">Documentation</option>
                        <option value="templates">Templates</option>
                        <option value="reports">Reports</option>
                        <option value="presentations">Presentations</option>
                        <option value="graphics">Graphics</option>
                        <option value="finance">Finance</option>
                        <option value="general">General</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">File Type</label>
                    <select id="type-filter" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        <option value="all">All Types</option>
                        <option value="document">Documents</option>
                        <option value="spreadsheet">Spreadsheets</option>
                        <option value="presentation">Presentations</option>
                        <option value="image">Images</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Sort By</label>
                    <select id="sort-filter" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        <option value="created_at">Date Added</option>
                        <option value="title">Title</option>
                        <option value="downloads">Downloads</option>
                        <option value="file_size">File Size</option>
                    </select>
                </div>
                <div class="flex items-end">
                    <button id="clear-filters-btn" class="w-full px-4 py-3 text-sm text-gray-600 border border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-300">
                        Clear All
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading State -->
        <div id="resources-loading" class="flex justify-center py-16">
            <div class="text-center">
                <div class="loading-spinner mx-auto mb-4"></div>
                <p class="text-gray-600">Loading resources...</p>
            </div>
        </div>

        <!-- Resources Grid -->
        <div id="resources-container" class="hidden grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8"></div>

        <!-- No Resources State -->
        <div id="no-resources" class="hidden text-center py-16">
            <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center">
                <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
            </div>
            <h3 class="text-xl font-semibold text-gray-900 mb-2">No resources found</h3>
            <p class="text-gray-600 mb-6">Try adjusting your filters or upload a new resource to get started.</p>
            <button onclick="document.getElementById('upload-resource-btn').click()" class="btn-primary text-white px-6 py-3 rounded-xl font-semibold">
                Upload First Resource
            </button>
        </div>

        <!-- Pagination -->
        <div id="pagination" class="hidden">
            <div class="glass-card rounded-2xl p-6 flex items-center justify-between">
                <div class="flex-1 flex justify-between sm:hidden">
                    <button id="prev-mobile" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50">
                        Previous
                    </button>
                    <button id="next-mobile" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50">
                        Next
                    </button>
                </div>
                <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                    <div>
                        <p class="text-sm text-gray-700">
                            Showing <span id="showing-from" class="font-medium">1</span> to <span id="showing-to" class="font-medium">20</span> of <span id="total-resources" class="font-medium">0</span> resources
                        </p>
                    </div>
                    <div>
                        <nav class="relative z-0 inline-flex rounded-lg shadow-sm -space-x-px">
                            <button id="prev-desktop" class="relative inline-flex items-center px-4 py-2 rounded-l-lg border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                Previous
                            </button>
                            <div id="page-numbers" class="flex"></div>
                            <button id="next-desktop" class="relative inline-flex items-center px-4 py-2 rounded-r-lg border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                Next
                            </button>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Resource Modal -->
    <div id="upload-modal" class="hidden fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity modal-backdrop"></div>
            <div class="inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full">
                <form id="upload-form" enctype="multipart/form-data">
                    <div class="bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-4">
                        <div class="flex items-center justify-between">
                            <h3 class="text-xl font-semibold text-white">Upload New Resource</h3>
                            <button type="button" onclick="closeUploadModal()" class="text-white hover:text-gray-200 transition-colors">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="bg-white px-6 py-6 space-y-6">
                        <!-- File Upload Area -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-900 mb-3">Upload Files *</label>
                            <div id="file-drop-zone" class="file-drop-zone rounded-2xl p-8 text-center cursor-pointer">
                                <svg class="mx-auto h-16 w-16 text-gray-400 mb-4" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <div>
                                    <p class="text-lg font-medium text-gray-900 mb-2">
                                        <span class="text-orange-600 hover:text-orange-700 cursor-pointer">Click to upload</span>
                                        or drag and drop
                                    </p>
                                    <p class="text-sm text-gray-500">PNG, JPG, PDF, DOC, XLS, PPT up to 10MB (max 5 files)</p>
                                </div>
                                <input type="file" id="file-input" name="files" multiple accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.png,.jpg,.jpeg,.gif,.txt,.csv,.zip" class="hidden">
                            </div>
                            <div id="file-list" class="mt-4 space-y-3"></div>
                        </div>

                        <!-- Resource Details -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="lg:col-span-2">
                                <label class="block text-sm font-semibold text-gray-900 mb-2">Resource Title *</label>
                                <input type="text" id="resource-title" name="title" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                            </div>

                            <div class="lg:col-span-2">
                                <label class="block text-sm font-semibold text-gray-900 mb-2">Description *</label>
                                <textarea id="resource-description" name="description" rows="4" required
                                          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"></textarea>
                            </div>

                            <div>
                                <label class="block text-sm font-semibold text-gray-900 mb-2">Category</label>
                                <select id="resource-category" name="category" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                    <option value="general">General</option>
                                    <option value="documentation">Documentation</option>
                                    <option value="templates">Templates</option>
                                    <option value="reports">Reports</option>
                                    <option value="presentations">Presentations</option>
                                    <option value="graphics">Graphics</option>
                                    <option value="finance">Finance</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-900 mb-2">Access Level</label>
                                <select id="resource-access" name="access_level" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                    <option value="all">Everyone</option>
                                    <option value="members">Members Only</option>
                                    <option value="admin">Admins Only</option>
                                </select>
                            </div>

                            <div class="lg:col-span-2">
                                <label class="block text-sm font-semibold text-gray-900 mb-2">Tags</label>
                                <input type="text" id="resource-tags" name="tags" placeholder="e.g. guidelines, template, important"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                <p class="text-xs text-gray-500 mt-2">Separate multiple tags with commas</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-6 py-4 sm:flex sm:flex-row-reverse sm:gap-3">
                        <button type="submit" id="upload-submit-btn" 
                                class="w-full sm:w-auto btn-primary text-white px-6 py-3 rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed">
                            <span class="upload-text">Upload Resource</span>
                            <div class="hidden upload-loading loading-spinner ml-2 inline-block"></div>
                        </button>
                        <button type="button" onclick="closeUploadModal()" 
                                class="mt-3 sm:mt-0 w-full sm:w-auto px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-300">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Resource Details Modal -->
    <div id="resource-modal" class="hidden fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity modal-backdrop"></div>
            <div class="inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full">
                <div class="bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-4">
                    <div class="flex items-center justify-between">
                        <h3 id="resource-modal-title" class="text-xl font-semibold text-white"></h3>
                        <button onclick="closeResourceModal()" class="text-white hover:text-gray-200 transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="bg-white px-6 py-6">
                    <div id="resource-modal-content"></div>
                </div>
                <div class="bg-gray-50 px-6 py-4">
                    <div id="resource-modal-actions" class="flex gap-3 justify-end"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/config.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/resources.js"></script>
</body>
</html>
